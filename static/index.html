<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情感分析系统</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js"></script>
    <link rel="stylesheet" href="/static/css/styles.css">
    <!-- 添加训练CSS样式 -->
    <link rel="stylesheet" href="/static/css/training.css">
</head>
<body>
<!-- 顶部导航栏 -->
<nav class="navbar navbar-expand-lg navbar-dark top-navbar">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <i class="bi bi-graph-up"></i> 情感分析系统
        </a>

        <div class="navbar-text system-title d-none d-md-block">
            智能文本情感分析平台
        </div>

        <!-- 用户信息和操作 -->
        <div class="ms-auto user-navbar-panel">
            <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle user-dropdown" type="button" id="userDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-person-circle"></i>
                    <span id="navbarUsername">加载中...</span>
                    <span id="navbarUserRole" class="badge bg-primary ms-1">用户</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                    <li><a class="dropdown-item" href="#" id="navbarProfile"><i class="bi bi-person"></i> 个人资料</a>
                    </li>
                    <li><a class="dropdown-item" href="#" id="navbarSettings"><i class="bi bi-gear"></i> 设置</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#" id="navbarLogoutBtn"><i class="bi bi-box-arrow-right"></i> 注销</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="app-container">
    <!-- 左侧边栏 - 恢复原来的结构 -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h3>情感分析系统</h3>
        </div>
        <div class="sidebar-menu">
            <div class="menu-item active" data-section="input-section">
                <i class="bi bi-input-cursor-text"></i>
                <span>文本输入</span>
            </div>
            <div class="menu-item" data-section="overall-section">
                <i class="bi bi-pie-chart"></i>
                <span>整体分析</span>
            </div>
            <div class="menu-item" data-section="sentences-section">
                <i class="bi bi-list-ul"></i>
                <span>句子分析</span>
            </div>
            <div class="menu-item" data-section="word-freq-section">
                <i class="bi bi-cloud"></i>
                <span>词频统计</span>
            </div>
            <!-- 将模型训练改为所有用户可访问 (移除 admin-only 类) -->
            <div class="menu-item" data-section="training-section">
                <i class="bi bi-gpu-card"></i>
                <span>模型训练</span>
            </div>
            <!-- 管理员专用菜单项 -->
            <div class="menu-item admin-only" data-section="admin-section">
                <i class="bi bi-gear-fill"></i>
                <span>系统管理</span>
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="main-content">
        <!-- 输入区域 -->
        <div class="content-section active" id="input-section">
            <div class="section-header">
                <h4>文本输入</h4>
            </div>
            <div class="section-body">
                <div class="input-section">
                    <ul class="nav nav-tabs mb-3" id="inputTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="text-tab" data-bs-toggle="tab"
                                    data-bs-target="#textInput-tab"
                                    type="button" role="tab" aria-controls="textInput-tab" aria-selected="true">文本输入
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="file-tab" data-bs-toggle="tab" data-bs-target="#fileInput-tab"
                                    type="button" role="tab" aria-controls="fileInput-tab" aria-selected="false">文件上传
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content" id="inputTabsContent">
                        <div class="tab-pane fade show active" id="textInput-tab" role="tabpanel"
                             aria-labelledby="text-tab">
                            <label for="textInput" class="form-label fw-bold">请输入要分析的文本：</label>
                            <textarea class="form-control mb-3" id="textInput" rows="4"
                                      placeholder="在此输入文本..."></textarea>
                            <div class="model-selection mb-3">
                                <label for="modelSelect" class="form-label fw-bold">选择分析模型：</label>
                                <select class="form-select" id="modelSelect">
                                    <option value="">加载中...</option>
                                </select>
                                <div class="form-text" id="modelDescription"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="fileInput-tab" role="tabpanel" aria-labelledby="file-tab">
                            <label for="fileInput" class="form-label fw-bold">上传文本文件（每行一个句子）：</label>
                            <div class="input-group mb-3">
                                <input type="file" class="form-control" id="fileInput" accept=".txt">
                                <button class="btn btn-outline-secondary" type="button" id="fileViewBtn" disabled>预览内容
                                </button>
                            </div>
                            <div class="file-info small text-muted mb-3" id="fileInfo"></div>
                            <div class="file-preview mb-3 d-none" id="filePreview">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <span>文件预览</span>
                                        <button type="button" class="btn-close" aria-label="Close"
                                                id="closePreview"></button>
                                    </div>
                                    <div class="card-body">
                                        <pre id="fileContent" class="file-content"></pre>
                                    </div>
                                </div>
                            </div>
                            <div class="model-selection mb-3">
                                <label for="fileModelSelect" class="form-label fw-bold">选择分析模型：</label>
                                <select class="form-select" id="fileModelSelect">
                                    <option value="">加载中...</option>
                                </select>
                                <div class="form-text" id="fileModelDescription"></div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button class="btn btn-primary btn-analyze" onclick="analyzeText()">开始分析</button>
                    </div>
                    <div id="errorMessage" class="error-message mt-3"></div>
                </div>
            </div>
        </div>

        <!-- 整体结果区域 -->
        <div class="content-section" id="overall-section">
            <div class="section-header">
                <h4>整体分析结果</h4>
            </div>
            <div class="section-body">
                <div id="overallResult" class="result-card show">
                    <div class="overall-sentiment">
                        <h5>情感倾向：<span id="overallSentiment" class="badge bg-primary"></span></h5>
                        <div class="progress">
                            <div id="overallPositive" class="progress-bar bg-success" role="progressbar"></div>
                            <div id="overallNegative" class="progress-bar bg-danger" role="progressbar"></div>
                        </div>
                        <div class="text-muted small">
                            积极：<span id="overallPositiveProb"></span>% |
                            消极：<span id="overallNegativeProb"></span>%
                        </div>
                    </div>
                    <div class="chart-container">
                        <div id="overallPieChart" class="chart"></div>
                    </div>
                </div>

                <!-- 添加模型指标到整体分析区域 -->
                <div id="modelMetrics" class="result-card show">
                    <h5 class="mb-3">模型评估指标</h5>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="small text-muted">准确率</div>
                            <div class="h4 mb-0 text-primary"><span id="accuracy"></span>%</div>
                        </div>
                        <div class="metric-item">
                            <div class="small text-muted">F1分数</div>
                            <div class="h4 mb-0 text-success"><span id="f1Score"></span>%</div>
                        </div>
                        <div class="metric-item">
                            <div class="small text-muted">召回率</div>
                            <div class="h4 mb-0 text-info"><span id="recall"></span>%</div>
                        </div>
                    </div>
                    <div class="chart-wrapper mt-4">
                        <h5 class="text-center mb-3">混淆矩阵</h5>
                        <div id="confusionMatrixChart" class="chart"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 句子分析区域 -->
        <div class="content-section" id="sentences-section">
            <div class="section-header">
                <h4>句子分析结果</h4>
            </div>
            <div class="section-body">
                <div id="sentenceResults" class="result-card show">
                    <div class="tab-buttons">
                        <button class="tab-button active" onclick="switchTab('list')">列表视图</button>
                        <button class="tab-button" onclick="switchTab('chart')">图表视图</button>
                    </div>
                    <div id="listView">
                        <h4 class="mb-3">句子分析：<span class="badge bg-secondary" id="sentenceCount"></span></h4>

                        <div class="filter-controls">
                            <div class="filter-row">
                                <span class="filter-label">情感筛选：</span>
                                <div class="filter-buttons">
                                    <button class="filter-button active" data-sentiment="all">全部</button>
                                    <button class="filter-button" data-sentiment="positive">积极</button>
                                    <button class="filter-button" data-sentiment="negative">消极</button>
                                </div>
                            </div>
                            <div class="filter-row">
                                <span class="filter-label">显示模式：</span>
                                <div class="filter-buttons">
                                    <button class="filter-button active" data-display="normal">正常</button>
                                    <button class="filter-button" data-display="compact">紧凑</button>
                                    <button class="filter-button" data-display="expanded">展开</button>
                                </div>
                            </div>
                        </div>

                        <div id="sentenceList"></div>

                        <div id="pagination" class="mt-3">
                            <div class="pagination-controls">
                                <div class="per-page-control">
                                    <span>每页显示：</span>
                                    <select id="perPageSelect" class="form-select form-select-sm" style="width: auto">
                                        <option value="5" selected>5条</option>
                                        <option value="10">10条</option>
                                        <option value="20">20条</option>
                                        <option value="50">50条</option>
                                    </select>
                                </div>
                                <div class="page-info" id="pageInfo"></div>
                            </div>

                            <div class="page-numbers" id="pageNumbers"></div>

                            <nav>
                                <ul class="pagination">
                                    <li class="page-item">
                                        <a class="page-link" href="#" onclick="changePage(-1)">上一页</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="#" onclick="changePage(1)">下一页</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div id="chartView" style="display: none;">
                        <!-- 修改为更灵活的布局结构 -->
                        <div class="charts-grid-layout">
                            <div class="chart-wrapper chart-wide">
                                <div id="sentimentPieChart" class="chart"></div>
                            </div>
                            <div class="chart-wrapper">
                                <div id="sentimentBarChart" class="chart"></div>
                            </div>
                            <div class="chart-wrapper">
                                <div id="sentimentScatterChart" class="chart"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 词频统计区域 -->
        <div class="content-section" id="word-freq-section">
            <div class="section-header">
                <h4>词频统计</h4>
            </div>
            <div class="section-body">
                <div id="wordFreq" class="result-card show">
                    <!-- 移除标签切换按钮，同时显示两种视图 -->
                    <h5 class="mb-3">词频标签</h5>
                    <div id="wordFreqTags" class="mt-3 mb-4"></div>

                    <h5 class="mb-3">词频图表</h5>
                    <div id="wordFreqCharts" class="charts-horizontal-layout">
                        <div class="chart-wrapper">
                            <div id="wordFreqBarChart" class="chart"></div>
                        </div>
                        <div class="chart-wrapper">
                            <div id="wordCloudChart" class="chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 管理员区域 -->
        <div class="content-section admin-only" id="admin-section">
            <div class="section-header">
                <h4>系统管理</h4>
            </div>
            <div class="section-body">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>用户管理</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-primary mb-3" id="createUserBtn">
                            <i class="bi bi-person-plus"></i> 创建新用户
                        </button>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>用户名</th>
                                    <th>邮箱</th>
                                    <th>角色</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                <tr>
                                    <td colspan="5" class="text-center">加载中...</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 模型训练区域 -->
        <div class="content-section" id="training-section">
            <div class="section-header">
                <h4>模型训练</h4>
            </div>
            <div class="section-body">
                <form id="trainingForm">
                    <div class="card">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">模型参数配置</h5>
                        </div>
                        <div class="card-body">
                            <!-- 模型类型和批量大小 -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="modelTypeSelect" class="form-label fw-bold">模型类型</label>
                                    <select class="form-select" id="modelTypeSelect" required>
                                        <option value="cnn" selected>TextCNN</option>
                                        <option value="lstm">LSTM</option>
                                        <option value="lstm_attention">LSTM+Attention</option>
                                        <option value="bilstm">Bi-LSTM</option>
                                        <option value="bilstm_attention">Bi-LSTM+Attention</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="batchSizeSelect" class="form-label fw-bold">批量大小</label>
                                    <select class="form-select" id="batchSizeSelect" required>
                                        <option value="16">16</option>
                                        <option value="32" selected>32</option>
                                        <option value="64">64</option>
                                        <option value="128">128</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 训练轮数和学习率 -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="epochsInput" class="form-label fw-bold">训练轮数</label>
                                    <input type="number" class="form-control" id="epochsInput" min="1" max="100"
                                           value="10" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="optimizerSelect" class="form-label fw-bold">优化器</label>
                                    <select class="form-select" id="optimizerSelect">
                                        <option value="adam" selected>Adam</option>
                                        <option value="sgd">SGD</option>
                                        <option value="rmsprop">RMSprop</option>
                                    </select>
                                </div>                                
                            </div>

                            <!-- Dropout和权重衰减 -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="dropoutInput" class="form-label fw-bold">Dropout比率</label>
                                    <input type="number" class="form-control" id="dropoutInput" min="0.1" max="0.9"
                                           step="0.1" value="0.5" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="weightDecayInput" class="form-label fw-bold">权重衰减</label>
                                    <input type="number" class="form-control" id="weightDecayInput" min="0" max="0.1"
                                           step="0.0001" value="0.0001">
                                </div>
                            </div>

                                <div class="col-md-6">
                                    <div class="form-check mt-4">
                                        <input class="form-check-input" type="checkbox" id="earlyStopping">
                                        <label class="form-check-label" for="earlyStopping">
                                            启用早停机制
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- 早停设置 -->
                            <div class="row mb-3" id="earlyStoppingOptions" style="display:none;">
                                <div class="col-md-6">
                                    <label for="patienceInput" class="form-label fw-bold">早停耐心值</label>
                                    <input type="number" class="form-control" id="patienceInput" min="1" max="20"
                                           value="3">
                                    <small class="form-text text-muted">验证集准确率在几轮内没有提高则停止训练</small>
                                </div>
                            </div>

                            <!-- LSTM特有参数 -->
                            <div class="row mb-3 lstm-only">
                                <div class="col-md-6">
                                    <label for="hiddenDimSelect" class="form-label fw-bold">隐藏层维度</label>
                                    <select class="form-select" id="hiddenDimSelect">
                                        <option value="64">64</option>
                                        <option value="128" selected>128</option>
                                        <option value="256">256</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="numLayersSelect" class="form-label fw-bold">LSTM层数</label>
                                    <select class="form-select" id="numLayersSelect">
                                        <option value="1">1</option>
                                        <option value="2" selected>2</option>
                                        <option value="3">3</option>
                                    </select>
                                </div>
                            </div>

                            <!-- CNN特有参数 -->
                            <div class="row mb-3 cnn-only">
                                <div class="col-md-6">
                                    <label for="numFiltersSelect" class="form-label fw-bold">卷积核数量</label>
                                    <select class="form-select" id="numFiltersSelect">
                                        <option value="64">64</option>
                                        <option value="128" selected>128</option>
                                        <option value="256">256</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer text-center">
                            <button type="button" class="btn btn-primary" id="startTrainingBtn"
                                    onclick="startTraining()">
                                <i class="bi bi-play-fill"></i> 开始训练
                            </button>
                        </div>
                    </div>
                </form>

                <!-- 训练进度区域 -->
                <div id="trainingProgress" class="mt-4 d-none">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center bg-light">
                            <h5 class="mb-0">训练进度</h5>
                            <span id="trainingStatus" class="badge bg-primary">训练中</span>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <div class="data-item">
                                        <div class="label text-muted">当前轮次</div>
                                        <div class="value" id="currentEpoch">0/0</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="data-item">
                                        <div class="label text-muted">预计剩余</div>
                                        <div class="value" id="remainingTime">计算中...</div>
                                    </div>
                                </div>
                            </div>

                            <div class="progress mb-4" style="height: 20px;">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                     style="width: 0%" id="totalProgressBar" aria-valuenow="0"
                                     aria-valuemin="0" aria-valuemax="100">0%
                                </div>
                            </div>

                            <div id="trainingControls" class="d-flex justify-content-center gap-3 mb-3">
                                <button type="button" class="btn btn-warning" id="pauseTrainingBtn">
                                    <i class="bi bi-pause-fill"></i> 暂停
                                </button>
                                <button type="button" class="btn btn-danger" id="stopTrainingBtn">
                                    <i class="bi bi-stop-fill"></i> 停止
                                </button>
                                <button type="button" class="btn btn-success" id="saveModelBtn" disabled>
                                    <i class="bi bi-download"></i> 保存模型
                                </button>
                            </div>

                            <!-- 修改图表区域，确保容器结构和尺寸 -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <div class="mb-3">
                                        <h5 class="text-center">训练指标曲线</h5>
                                    </div>
                                    <div class="charts-row">
                                        <div class="chart-item">
                                            <div class="chart-card">
                                                <div class="chart-header">损失曲线</div>
                                                <div class="chart-body">
                                                    <!-- 添加内联样式确保图表容器可见 -->
                                                    <div id="lossChart"
                                                         style="width:100%; height:300px; min-height:300px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chart-item">
                                            <div class="chart-card">
                                                <div class="chart-header">准确率曲线</div>
                                                <div class="chart-body">
                                                    <!-- 添加内联样式确保图表容器可见 -->
                                                    <div id="accuracyChart"
                                                         style="width:100%; height:300px; min-height:300px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 训练日志 -->
                            <div class="card mt-4" id="trainingLog">
                                <div class="card-header bg-light">训练日志</div>
                                <div class="card-body" style="max-height: 200px; overflow-y: auto;">
                                    <div class="log-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 模型评估结果 -->
                <div id="modelEvaluation" class="mt-4 d-none">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="m-0">模型评估</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title">准确率</h6>
                                            <h3 id="testAccuracy" class="text-primary">-</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title">F1分数</h6>
                                            <h3 id="f1Score" class="text-success">-</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title">召回率</h6>
                                            <h3 id="recall" class="text-info">-</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title">精确率</h6>
                                            <h3 id="precision" class="text-warning">-</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header">混淆矩阵</div>
                                        <div class="card-body">
                                            <div id="confusionMatrix" style="height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 占位符 -->
                <div id="trainingPlaceholder" class="text-center py-5">
                    <i class="bi bi-cpu" style="font-size: 3rem; color: #ccc;"></i>
                    <p class="mt-3 text-muted">选择模型参数并点击"开始训练"按钮开始训练模型</p>
                </div>

                <div id="errorMessage" class="alert alert-danger mt-3" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>

<div id="loading" class="loading">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">分析中...</span>
    </div>
    <p class="mb-0 mt-2">正在分析中<span id="loadingDots">...</span></p>
</div>

<!-- 创建用户模态框 -->
<div class="modal fade" id="createUserModal" tabindex="-1" aria-labelledby="createUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createUserModalLabel">创建新用户</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="createUserForm">
                    <!-- 表单内容在JavaScript中动态生成 -->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="saveUserBtn">创建用户</button>
            </div>
        </div>
    </div>
</div>

<!-- 编辑用户模态框 -->
<div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editUserModalLabel">编辑用户</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <input type="hidden" id="editOriginalData">
                    <div class="mb-3">
                        <label for="editUsername" class="form-label">用户名</label>
                        <input type="text" class="form-control" id="editUsername" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label">电子邮箱</label>
                        <input type="email" class="form-control" id="editEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="editPassword" class="form-label">新密码（留空表示不修改）</label>
                        <input type="password" class="form-control" id="editPassword">
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="editIsAdmin">
                        <label class="form-check-label" for="editIsAdmin">管理员权限</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="updateUserBtn">更新用户</button>
            </div>
        </div>
    </div>
</div>

<!-- 删除确认模态框 -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteConfirmModalLabel">确认删除</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>确定要删除用户吗？此操作可以通过撤销按钮恢复。</p>
                <input type="hidden" id="deleteUserId">
                <input type="hidden" id="deleteUserData">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">删除</button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript files -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js"></script>
<script src="/static/js/shared.js"></script>
<script src="/static/js/auth.js"></script>
<script src="/static/js/admin.js"></script>
<script src="/static/js/charts.js"></script>
<script src="/static/js/ui.js"></script>
<script src="/static/js/pagination.js"></script>
<script src="/static/js/fileupload.js"></script>
<script src="/static/js/main.js"></script>
<script src="/static/js/training.js"></script>
</body>
</html>