# 情感分析系统

情感分析系统是一个基于Web的应用程序，可以对中文文本进行情感分析，判断文本的积极或消极倾向。该系统支持单句分析和批量文件处理，并提供多种可视化方式展示分析结果。

## 功能特点

### 核心功能
- **多模型支持**：提供多种预训练模型供用户选择（TextCNN, LSTM, BiLSTM, LSTM+Attention, BiLSTM+Attention）
- **多种输入方式**：支持直接文本输入和TXT文件上传
- **详细分析结果**：
  - 整体情感倾向分析
  - 句子级别的情感分析
  - 情感概率和置信度计算
- **数据可视化**：
  - 饼图展示整体情感分布
  - 柱状图展示句子情感分布
  - 散点图展示情感与置信度关系
  - 词云和词频标签展示关键词
  - 混淆矩阵展示模型评估指标
  - 雷达图展示情感多维分析

### 用户体验
- **交互式界面**：
  - 列表/图表视图切换
  - 标签/图表词频展示切换
  - 情感筛选（全部/积极/消极）
  - 显示模式调整（正常/紧凑/展开）
  - 分页浏览分析结果
- **个性化设置**：
  - 自定义界面外观
  - 通知设置
  - 系统偏好设置

### 用户管理
- **用户认证**：
  - 用户登录和注册功能
  - 区分管理员和普通用户权限
  - 基于角色的访问控制
- **管理功能**：
  - 用户管理（仅限管理员）
  - 系统配置管理（仅限管理员）

### 模型训练
- **高级模型训练**：
  - 支持多种模型架构（CNN, LSTM, BiLSTM, Attention等）
  - 可视化训练过程和指标
  - 自定义训练参数配置
  - 实时训练进度反馈

## 技术实现

### 前端

- **HTML5/CSS3**：响应式布局，卡片动画和视觉效果
- **JavaScript**：模块化设计，负责用户交互和数据处理
- **Bootstrap 5**：提供基础UI组件
- **ECharts**：数据可视化图表库
- **ECharts WordCloud**：词云展示

### 后端

- **Flask**：Web应用框架
- **Flask-Login**：用户认证管理
- **SQLAlchemy**：数据库ORM
- **PyTorch**：深度学习模型实现
- **Jieba**：中文分词

### 模块结构

#### 前端模块
- **ui.js**：用户界面相关功能，包括标签切换、卡片展开/折叠等
- **shared.js**：共享变量和工具函数
- **pagination.js**：分页和结果显示控制
- **fileupload.js**：文件上传和处理功能
- **charts.js**：各类图表的初始化和配置
- **auth.js**：用户认证相关功能
- **admin.js**：管理员功能实现
- **profile.js**：用户资料管理
- **settings.js**：用户设置管理
- **training.js**：模型训练相关功能
- **main.js**：程序入口和核心功能，包括API交互和结果处理

#### 后端模块
- **app.py**：Flask应用主文件，处理路由和API请求
- **auth.py**：认证逻辑实现
- **models.py**：数据模型定义
- **main.py**：模型训练入口
- **cnn_model.py**：TextCNN模型定义
- **lstm_model.py**：LSTM系列模型定义
- **data_Process.py**：数据预处理工具
- **config.py**：系统配置
- **utils.py**：工具函数
- **eval.py**：模型评估脚本

## 用户角色

1. **管理员**：
    - 全部系统功能访问权限
    - 用户管理（创建、编辑、删除用户）
    - 系统配置管理
    - 操作历史记录和撤销功能

2. **普通用户**：
    - 文本分析功能
    - 结果查看和数据可视化
    - 个人账户管理
    - 模型训练功能

## 使用方法

### 基础功能

1. **注册/登录**：
    - 新用户需先完成注册
    - 使用用户名和密码登录系统

2. **文本分析**：
    - 在"文本输入"标签页中输入要分析的文本
    - 选择合适的分析模型
    - 点击"开始分析"按钮

3. **文件分析**：
    - 切换到"文件上传"标签页
    - 上传TXT格式的文本文件（每行一个句子）
    - 选择分析模型
    - 点击"开始分析"按钮

4. **查看结果**：
    - 整体分析结果会显示文本的总体情感倾向
    - 句子分析结果可在列表或图表视图中查看
    - 使用筛选按钮可以过滤显示不同情感的句子
    - 使用显示模式按钮可以调整卡片的显示方式
    - 词频统计可通过标签或图表方式查看

### 高级功能

5. **模型训练**：
    - 进入"模型训练"页面
    - 选择模型类型（CNN, LSTM等）
    - 配置训练参数（批量大小、训练轮数等）
    - 点击"开始训练"按钮开始训练过程
    - 实时查看训练进度和性能指标

6. **个人设置**：
    - 点击右上角用户下拉菜单中的"设置"
    - 根据需要调整界面外观、通知和其他系统设置
    - 保存更改以应用新设置

7. **用户管理**（管理员）：
    - 在系统管理页面查看所有用户
    - 创建、编辑或删除用户
    - 管理用户权限
    - 可撤销最近的用户操作

## 安装要求

### 客户端

- 现代浏览器（Chrome, Firefox, Safari, Edge等）
- 启用JavaScript
- 网络连接以访问API端点

### 服务端

- Python 3.7+
- Flask和相关依赖
- SQLite数据库
- PyTorch深度学习框架
- 足够的处理能力以支持模型运算

## 部署指南

1. **克隆代码库**：
   ```bash
   git clone https://github.com/yourusername/sentiment-analysis.git
   cd sentiment-analysis
   ```

2. **安装依赖**：
   ```bash
   pip install -r requirements.txt
   ```

3. **初始化数据库**：
   ```bash
   python init_db.py
   ```

4. **启动应用**：
   ```bash
   python app.py
   ```

5. **访问系统**：
   在浏览器中打开 http://localhost:5003

## API接口

- **POST /api/analyze**：提交文本进行分析
    - 请求体：包含text（文本内容）和model_type（模型类型）
    - 响应：包含整体分析结果、句子级分析结果、词频统计和模型评估指标

- **GET /api/models**：获取可用的模型列表
    - 响应：包含models数组（每个模型的id、名称和描述）和default（默认模型id）

- **POST /api/train**：提交模型训练任务
    - 请求体：包含model_type（模型类型）和训练参数
    - 响应：包含训练任务ID和状态信息

- **GET /api/train/status/:id**：获取训练任务状态
    - 响应：包含训练进度、当前指标和状态

- **网络爬虫接口**：
    - **POST /api/scrape/product**：爬取商品评论数据
    - 请求体：包含url（商品链接）
    - 响应：包含评论列表和统计信息

- **认证相关接口**：
    - **POST /auth/login**：用户登录
    - **POST /auth/register**：用户注册
    - **GET /api/profile**：获取当前用户信息
    - **POST /api/profile/update**：更新用户信息

- **管理员接口**：
    - **GET /api/admin/users**：获取所有用户列表
    - **POST /api/admin/create_user**：创建新用户
    - **PUT /api/admin/update_user/:id**：更新用户信息
    - **DELETE /api/admin/delete_user/:id**：删除用户

## 未来改进计划

- 支持更多文件格式（如DOCX、PDF）
- 添加更高级的文本预处理选项
- 引入情感分析的多级分类（不仅是积极/消极）
- 提供API密钥功能，允许第三方应用集成
- 实现批处理分析的进度显示
- 增加历史分析结果的保存和比较功能
- 实现完整的用户权限管理系统
- 添加更多深度学习模型和预训练选项
- 多语言支持

---

© 2023 情感分析系统 - 保留所有权利

### 联系方式

如有问题或建议，请联系系统管理员或访问项目GitHub仓库。
